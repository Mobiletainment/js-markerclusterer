!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t="undefined"!=typeof globalThis?globalThis:t||self).markerClusterer={})}(this,(function(t){"use strict";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n,o,i={};function s(){if(o)return n;o=1;var t=function(t){return t&&t.Math===Math&&t};return n=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof r&&r)||t("object"==typeof n&&n)||function(){return this}()||Function("return this")()}var a,u,c,f,l,h,p,d,m={};function g(){return u?a:(u=1,a=function(t){try{return!!t()}catch(t){return!0}})}function v(){if(f)return c;f=1;var t=g();return c=!t((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function y(){if(h)return l;h=1;var t=g();return l=!t((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function w(){if(d)return p;d=1;var t=y(),r=Function.prototype.call;return p=t?r.bind(r):function(){return r.apply(r,arguments)},p}var b,k,x,M,O,E,P,S,C,j,_,A,I,T,L,Z,R,z,D,F,N,U,B,V,W,G,$,H,q,Y,K,X,J,Q,tt,rt,et,nt,ot,it,st,at={};function ut(){return x?k:(x=1,k=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}})}function ct(){if(O)return M;O=1;var t=y(),r=Function.prototype,e=r.call,n=t&&r.bind.bind(e,e);return M=t?n:function(t){return function(){return e.apply(t,arguments)}},M}function ft(){if(P)return E;P=1;var t=ct(),r=t({}.toString),e=t("".slice);return E=function(t){return e(r(t),8,-1)}}function lt(){return _?j:(_=1,j=function(t){return null==t})}function ht(){if(I)return A;I=1;var t=lt(),r=TypeError;return A=function(e){if(t(e))throw new r("Can't call method on "+e);return e}}function pt(){if(L)return T;L=1;var t=function(){if(C)return S;C=1;var t=ct(),r=g(),e=ft(),n=Object,o=t("".split);return S=r((function(){return!n("z").propertyIsEnumerable(0)}))?function(t){return"String"===e(t)?o(t,""):n(t)}:n}(),r=ht();return T=function(e){return t(r(e))}}function dt(){if(R)return Z;R=1;var t="object"==typeof document&&document.all;return Z=void 0===t&&void 0!==t?function(r){return"function"==typeof r||r===t}:function(t){return"function"==typeof t}}function mt(){if(D)return z;D=1;var t=dt();return z=function(r){return"object"==typeof r?null!==r:t(r)}}function gt(){if(N)return F;N=1;var t=s(),r=dt();return F=function(e,n){return arguments.length<2?(o=t[e],r(o)?o:void 0):t[e]&&t[e][n];var o},F}function vt(){if(B)return U;B=1;var t=ct();return U=t({}.isPrototypeOf)}function yt(){if($)return G;$=1;var t,r,e=s(),n=function(){if(W)return V;W=1;var t=s().navigator,r=t&&t.userAgent;return V=r?String(r):""}(),o=e.process,i=e.Deno,a=o&&o.versions||i&&i.version,u=a&&a.v8;return u&&(r=(t=u.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!r&&n&&(!(t=n.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=n.match(/Chrome\/(\d+)/))&&(r=+t[1]),G=r}function wt(){if(q)return H;q=1;var t=yt(),r=g(),e=s().String;return H=!!Object.getOwnPropertySymbols&&!r((function(){var r=Symbol("symbol detection");return!e(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&t&&t<41}))}function bt(){if(K)return Y;K=1;var t=wt();return Y=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function kt(){if(J)return X;J=1;var t=gt(),r=dt(),e=vt(),n=bt(),o=Object;return X=n?function(t){return"symbol"==typeof t}:function(n){var i=t("Symbol");return r(i)&&e(i.prototype,o(n))}}function xt(){if(tt)return Q;tt=1;var t=String;return Q=function(r){try{return t(r)}catch(t){return"Object"}}}function Mt(){if(et)return rt;et=1;var t=dt(),r=xt(),e=TypeError;return rt=function(n){if(t(n))return n;throw new e(r(n)+" is not a function")}}function Ot(){if(ot)return nt;ot=1;var t=Mt(),r=lt();return nt=function(e,n){var o=e[n];return r(o)?void 0:t(o)}}function Et(){if(st)return it;st=1;var t=w(),r=dt(),e=mt(),n=TypeError;return it=function(o,i){var s,a;if("string"===i&&r(s=o.toString)&&!e(a=t(s,o)))return a;if(r(s=o.valueOf)&&!e(a=t(s,o)))return a;if("string"!==i&&r(s=o.toString)&&!e(a=t(s,o)))return a;throw new n("Can't convert object to primitive value")}}var Pt,St,Ct,jt,_t,At,It,Tt,Lt,Zt,Rt,zt,Dt,Ft,Nt,Ut,Bt,Vt,Wt,Gt,$t,Ht,qt,Yt,Kt={exports:{}};function Xt(){return St?Pt:(St=1,Pt=!1)}function Jt(){if(jt)return Ct;jt=1;var t=s(),r=Object.defineProperty;return Ct=function(e,n){try{r(t,e,{value:n,configurable:!0,writable:!0})}catch(r){t[e]=n}return n}}function Qt(){if(_t)return Kt.exports;_t=1;var t=Xt(),r=s(),e=Jt(),n="__core-js_shared__",o=Kt.exports=r[n]||e(n,{});return(o.versions||(o.versions=[])).push({version:"3.40.0",mode:t?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Kt.exports}function tr(){if(It)return At;It=1;var t=Qt();return At=function(r,e){return t[r]||(t[r]=e||{})}}function rr(){if(Lt)return Tt;Lt=1;var t=ht(),r=Object;return Tt=function(e){return r(t(e))}}function er(){if(Rt)return Zt;Rt=1;var t=ct(),r=rr(),e=t({}.hasOwnProperty);return Zt=Object.hasOwn||function(t,n){return e(r(t),n)}}function nr(){if(Dt)return zt;Dt=1;var t=ct(),r=0,e=Math.random(),n=t(1..toString);return zt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+n(++r+e,36)}}function or(){if(Nt)return Ft;Nt=1;var t=s(),r=tr(),e=er(),n=nr(),o=wt(),i=bt(),a=t.Symbol,u=r("wks"),c=i?a.for||a:a&&a.withoutSetter||n;return Ft=function(t){return e(u,t)||(u[t]=o&&e(a,t)?a[t]:c("Symbol."+t)),u[t]}}function ir(){if(Bt)return Ut;Bt=1;var t=w(),r=mt(),e=kt(),n=Ot(),o=Et(),i=or(),s=TypeError,a=i("toPrimitive");return Ut=function(i,u){if(!r(i)||e(i))return i;var c,f=n(i,a);if(f){if(void 0===u&&(u="default"),c=t(f,i,u),!r(c)||e(c))return c;throw new s("Can't convert object to primitive value")}return void 0===u&&(u="number"),o(i,u)}}function sr(){if(Wt)return Vt;Wt=1;var t=ir(),r=kt();return Vt=function(e){var n=t(e,"string");return r(n)?n:n+""}}function ar(){if($t)return Gt;$t=1;var t=s(),r=mt(),e=t.document,n=r(e)&&r(e.createElement);return Gt=function(t){return n?e.createElement(t):{}}}function ur(){if(qt)return Ht;qt=1;var t=v(),r=g(),e=ar();return Ht=!t&&!r((function(){return 7!==Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a}))}function cr(){if(Yt)return m;Yt=1;var t=v(),r=w(),e=function(){if(b)return at;b=1;var t={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,e=r&&!t.call({1:2},1);return at.f=e?function(t){var e=r(this,t);return!!e&&e.enumerable}:t,at}(),n=ut(),o=pt(),i=sr(),s=er(),a=ur(),u=Object.getOwnPropertyDescriptor;return m.f=t?u:function(t,c){if(t=o(t),c=i(c),a)try{return u(t,c)}catch(t){}if(s(t,c))return n(!r(e.f,t,c),t[c])},m}var fr,lr,hr,pr,dr,mr,gr,vr={};function yr(){if(lr)return fr;lr=1;var t=v(),r=g();return fr=t&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}function wr(){if(pr)return hr;pr=1;var t=mt(),r=String,e=TypeError;return hr=function(n){if(t(n))return n;throw new e(r(n)+" is not an object")}}function br(){if(dr)return vr;dr=1;var t=v(),r=ur(),e=yr(),n=wr(),o=sr(),i=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",f="writable";return vr.f=t?e?function(t,r,e){if(n(t),r=o(r),n(e),"function"==typeof t&&"prototype"===r&&"value"in e&&f in e&&!e[f]){var i=a(t,r);i&&i[f]&&(t[r]=e.value,e={configurable:c in e?e[c]:i[c],enumerable:u in e?e[u]:i[u],writable:!1})}return s(t,r,e)}:s:function(t,e,a){if(n(t),e=o(e),n(a),r)try{return s(t,e,a)}catch(t){}if("get"in a||"set"in a)throw new i("Accessors not supported");return"value"in a&&(t[e]=a.value),t},vr}function kr(){if(gr)return mr;gr=1;var t=v(),r=br(),e=ut();return mr=t?function(t,n,o){return r.f(t,n,e(1,o))}:function(t,r,e){return t[r]=e,t}}var xr,Mr,Or,Er,Pr,Sr,Cr,jr,_r,Ar,Ir,Tr,Lr,Zr,Rr,zr={exports:{}};function Dr(){if(Er)return Or;Er=1;var t=ct(),r=dt(),e=Qt(),n=t(Function.toString);return r(e.inspectSource)||(e.inspectSource=function(t){return n(t)}),Or=e.inspectSource}function Fr(){if(jr)return Cr;jr=1;var t=tr(),r=nr(),e=t("keys");return Cr=function(t){return e[t]||(e[t]=r(t))}}function Nr(){return Ar?_r:(Ar=1,_r={})}function Ur(){if(Tr)return Ir;Tr=1;var t,r,e,n=function(){if(Sr)return Pr;Sr=1;var t=s(),r=dt(),e=t.WeakMap;return Pr=r(e)&&/native code/.test(String(e))}(),o=s(),i=mt(),a=kr(),u=er(),c=Qt(),f=Fr(),l=Nr(),h="Object already initialized",p=o.TypeError,d=o.WeakMap;if(n||c.state){var m=c.state||(c.state=new d);m.get=m.get,m.has=m.has,m.set=m.set,t=function(t,r){if(m.has(t))throw new p(h);return r.facade=t,m.set(t,r),r},r=function(t){return m.get(t)||{}},e=function(t){return m.has(t)}}else{var g=f("state");l[g]=!0,t=function(t,r){if(u(t,g))throw new p(h);return r.facade=t,a(t,g,r),r},r=function(t){return u(t,g)?t[g]:{}},e=function(t){return u(t,g)}}return Ir={set:t,get:r,has:e,enforce:function(n){return e(n)?r(n):t(n,{})},getterFor:function(t){return function(e){var n;if(!i(e)||(n=r(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}}}}function Br(){if(Lr)return zr.exports;Lr=1;var t=ct(),r=g(),e=dt(),n=er(),o=v(),i=function(){if(Mr)return xr;Mr=1;var t=v(),r=er(),e=Function.prototype,n=t&&Object.getOwnPropertyDescriptor,o=r(e,"name"),i=o&&"something"===function(){}.name,s=o&&(!t||t&&n(e,"name").configurable);return xr={EXISTS:o,PROPER:i,CONFIGURABLE:s}}().CONFIGURABLE,s=Dr(),a=Ur(),u=a.enforce,c=a.get,f=String,l=Object.defineProperty,h=t("".slice),p=t("".replace),d=t([].join),m=o&&!r((function(){return 8!==l((function(){}),"length",{value:8}).length})),y=String(String).split("String"),w=zr.exports=function(t,r,e){"Symbol("===h(f(r),0,7)&&(r="["+p(f(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),e&&e.getter&&(r="get "+r),e&&e.setter&&(r="set "+r),(!n(t,"name")||i&&t.name!==r)&&(o?l(t,"name",{value:r,configurable:!0}):t.name=r),m&&e&&n(e,"arity")&&t.length!==e.arity&&l(t,"length",{value:e.arity});try{e&&n(e,"constructor")&&e.constructor?o&&l(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var s=u(t);return n(s,"source")||(s.source=d(y,"string"==typeof r?r:"")),t};return Function.prototype.toString=w((function(){return e(this)&&c(this).source||s(this)}),"toString"),zr.exports}function Vr(){if(Rr)return Zr;Rr=1;var t=dt(),r=br(),e=Br(),n=Jt();return Zr=function(o,i,s,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:i;if(t(s)&&e(s,c,a),a.global)u?o[i]=s:n(i,s);else{try{a.unsafe?o[i]&&(u=!0):delete o[i]}catch(t){}u?o[i]=s:r.f(o,i,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return o}}var Wr,Gr,$r,Hr,qr,Yr,Kr,Xr,Jr,Qr,te,re,ee,ne,oe,ie,se,ae={};function ue(){if(Hr)return $r;Hr=1;var t=function(){if(Gr)return Wr;Gr=1;var t=Math.ceil,r=Math.floor;return Wr=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}}();return $r=function(r){var e=+r;return e!=e||0===e?0:t(e)}}function ce(){if(Yr)return qr;Yr=1;var t=ue(),r=Math.max,e=Math.min;return qr=function(n,o){var i=t(n);return i<0?r(i+o,0):e(i,o)}}function fe(){if(Xr)return Kr;Xr=1;var t=ue(),r=Math.min;return Kr=function(e){var n=t(e);return n>0?r(n,9007199254740991):0}}function le(){if(Qr)return Jr;Qr=1;var t=fe();return Jr=function(r){return t(r.length)}}function he(){if(ne)return ee;ne=1;var t=ct(),r=er(),e=pt(),n=function(){if(re)return te;re=1;var t=pt(),r=ce(),e=le(),n=function(n){return function(o,i,s){var a=t(o),u=e(a);if(0===u)return!n&&-1;var c,f=r(s,u);if(n&&i!=i){for(;u>f;)if((c=a[f++])!=c)return!0}else for(;u>f;f++)if((n||f in a)&&a[f]===i)return n||f||0;return!n&&-1}};return te={includes:n(!0),indexOf:n(!1)}}().indexOf,o=Nr(),i=t([].push);return ee=function(t,s){var a,u=e(t),c=0,f=[];for(a in u)!r(o,a)&&r(u,a)&&i(f,a);for(;s.length>c;)r(u,a=s[c++])&&(~n(f,a)||i(f,a));return f}}function pe(){return ie?oe:(ie=1,oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}var de,me,ge,ve,ye,we,be,ke,xe,Me,Oe,Ee={};function Pe(){if(ge)return me;ge=1;var t=gt(),r=ct(),e=function(){if(se)return ae;se=1;var t=he(),r=pe().concat("length","prototype");return ae.f=Object.getOwnPropertyNames||function(e){return t(e,r)},ae}(),n=(de||(de=1,Ee.f=Object.getOwnPropertySymbols),Ee),o=wr(),i=r([].concat);return me=t("Reflect","ownKeys")||function(t){var r=e.f(o(t)),s=n.f;return s?i(r,s(t)):r}}function Se(){if(ye)return ve;ye=1;var t=er(),r=Pe(),e=cr(),n=br();return ve=function(o,i,s){for(var a=r(i),u=n.f,c=e.f,f=0;f<a.length;f++){var l=a[f];t(o,l)||s&&t(s,l)||u(o,l,c(i,l))}}}function Ce(){if(xe)return ke;xe=1;var t=s(),r=cr().f,e=kr(),n=Vr(),o=Jt(),i=Se(),a=function(){if(be)return we;be=1;var t=g(),r=dt(),e=/#|\.prototype\./,n=function(e,n){var u=i[o(e)];return u===a||u!==s&&(r(n)?t(n):!!n)},o=n.normalize=function(t){return String(t).replace(e,".").toLowerCase()},i=n.data={},s=n.NATIVE="N",a=n.POLYFILL="P";return we=n}();return ke=function(s,u){var c,f,l,h,p,d=s.target,m=s.global,g=s.stat;if(c=m?t:g?t[d]||o(d,{}):t[d]&&t[d].prototype)for(f in u){if(h=u[f],l=s.dontCallGetSet?(p=r(c,f))&&p.value:c[f],!a(m?f:d+(g?".":"#")+f,s.forced)&&void 0!==l){if(typeof h==typeof l)continue;i(h,l)}(s.sham||l&&l.sham)&&e(h,"sham",!0),n(c,f,h,s)}}}function je(){return Oe?Me:(Oe=1,Me=function(t){return{iterator:t,next:t.next,done:!1}})}var _e,Ae,Ie,Te,Le,Ze,Re,ze,De,Fe,Ne,Ue,Be,Ve,We,Ge,$e,He,qe,Ye,Ke,Xe,Je,Qe,tn,rn,en,nn={};function on(){if(Ae)return _e;Ae=1;var t=he(),r=pe();return _e=Object.keys||function(e){return t(e,r)}}function sn(){if(Le)return Te;Le=1;var t=gt();return Te=t("document","documentElement")}function an(){if(Re)return Ze;Re=1;var t,r=wr(),e=function(){if(Ie)return nn;Ie=1;var t=v(),r=yr(),e=br(),n=wr(),o=pt(),i=on();return nn.f=t&&!r?Object.defineProperties:function(t,r){n(t);for(var s,a=o(r),u=i(r),c=u.length,f=0;c>f;)e.f(t,s=u[f++],a[s]);return t},nn}(),n=pe(),o=Nr(),i=sn(),s=ar(),a=Fr(),u="prototype",c="script",f=a("IE_PROTO"),l=function(){},h=function(t){return"<"+c+">"+t+"</"+c+">"},p=function(t){t.write(h("")),t.close();var r=t.parentWindow.Object;return t=null,r},d=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var r,e,o;d="undefined"!=typeof document?document.domain&&t?p(t):(e=s("iframe"),o="java"+c+":",e.style.display="none",i.appendChild(e),e.src=String(o),(r=e.contentWindow.document).open(),r.write(h("document.F=Object")),r.close(),r.F):p(t);for(var a=n.length;a--;)delete d[u][n[a]];return d()};return o[f]=!0,Ze=Object.create||function(t,n){var o;return null!==t?(l[u]=r(t),o=new l,l[u]=null,o[f]=t):o=d(),void 0===n?o:e.f(o,n)}}function un(){if(De)return ze;De=1;var t=Vr();return ze=function(r,e,n){for(var o in e)t(r,o,e[o],n);return r}}function cn(){if(Be)return Ue;Be=1;var t=er(),r=dt(),e=rr(),n=Fr(),o=function(){if(Ne)return Fe;Ne=1;var t=g();return Fe=!t((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))}(),i=n("IE_PROTO"),s=Object,a=s.prototype;return Ue=o?s.getPrototypeOf:function(n){var o=e(n);if(t(o,i))return o[i];var u=o.constructor;return r(u)&&o instanceof u?u.prototype:o instanceof s?a:null}}function fn(){if(We)return Ve;We=1;var t,r,e,n=g(),o=dt(),i=mt(),s=an(),a=cn(),u=Vr(),c=or(),f=Xt(),l=c("iterator"),h=!1;return[].keys&&("next"in(e=[].keys())?(r=a(a(e)))!==Object.prototype&&(t=r):h=!0),!i(t)||n((function(){var r={};return t[l].call(r)!==r}))?t={}:f&&(t=s(t)),o(t[l])||u(t,l,(function(){return this})),Ve={IteratorPrototype:t,BUGGY_SAFARI_ITERATORS:h}}function ln(){return $e?Ge:($e=1,Ge=function(t,r){return{value:t,done:r}})}function hn(){if(qe)return He;qe=1;var t=w(),r=wr(),e=Ot();return He=function(n,o,i){var s,a;r(n);try{if(!(s=e(n,"return"))){if("throw"===o)throw i;return i}s=t(s,n)}catch(t){a=!0,s=t}if("throw"===o)throw i;if(a)throw s;return r(s),i}}function pn(){if(Ke)return Ye;Ke=1;var t=w(),r=an(),e=kr(),n=un(),o=or(),i=Ur(),s=Ot(),a=fn().IteratorPrototype,u=ln(),c=hn(),f=o("toStringTag"),l="IteratorHelper",h="WrapForValidIterator",p=i.set,d=function(e){var o=i.getterFor(e?h:l);return n(r(a),{next:function(){var t=o(this);if(e)return t.nextHandler();if(t.done)return u(void 0,!0);try{var r=t.nextHandler();return t.returnHandlerResult?r:u(r,t.done)}catch(r){throw t.done=!0,r}},return:function(){var r=o(this),n=r.iterator;if(r.done=!0,e){var i=s(n,"return");return i?t(i,n):u(void 0,!0)}if(r.inner)try{c(r.inner.iterator,"normal")}catch(t){return c(n,"throw",t)}return n&&c(n,"normal"),u(void 0,!0)}})},m=d(!0),g=d(!1);return e(g,f,"Iterator Helper"),Ye=function(t,r,e){var n=function(n,o){o?(o.iterator=n.iterator,o.next=n.next):o=n,o.type=r?h:l,o.returnHandlerResult=!!e,o.nextHandler=t,o.counter=0,o.done=!1,p(this,o)};return n.prototype=r?m:g,n}}function dn(){if(Je)return Xe;Je=1;var t=wr(),r=hn();return Xe=function(e,n,o,i){try{return i?n(t(o)[0],o[1]):n(o)}catch(t){r(e,"throw",t)}}}function mn(){if(rn)return i;rn=1;var t=Ce(),r=function(){if(tn)return Qe;tn=1;var t=w(),r=Mt(),e=wr(),n=je(),o=pn(),i=dn(),s=o((function(){var r=this.iterator,n=e(t(this.next,r));if(!(this.done=!!n.done))return i(r,this.mapper,[n.value,this.counter++],!0)}));return Qe=function(t){return e(this),r(t),new s(n(this),{mapper:t})}}();return t({target:"Iterator",proto:!0,real:!0,forced:Xt()},{map:r}),i}function gn(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(e[n[o]]=t[n[o]])}return e}en||(en=1,mn()),"function"==typeof SuppressedError&&SuppressedError;var vn,yn,wn,bn,kn,xn,Mn,On,En={};function Pn(){if(yn)return vn;yn=1;var t=vt(),r=TypeError;return vn=function(e,n){if(t(n,e))return e;throw new r("Incorrect invocation")}}function Sn(){if(bn)return wn;bn=1;var t=Br(),r=br();return wn=function(e,n,o){return o.get&&t(o.get,n,{getter:!0}),o.set&&t(o.set,n,{setter:!0}),r.f(e,n,o)}}function Cn(){if(xn)return kn;xn=1;var t=v(),r=br(),e=ut();return kn=function(n,o,i){t?r.f(n,o,e(0,i)):n[o]=i}}On||(On=1,function(){if(Mn)return En;Mn=1;var t=Ce(),r=s(),e=Pn(),n=wr(),o=dt(),i=cn(),a=Sn(),u=Cn(),c=g(),f=er(),l=or(),h=fn().IteratorPrototype,p=v(),d=Xt(),m="constructor",y="Iterator",w=l("toStringTag"),b=TypeError,k=r[y],x=d||!o(k)||k.prototype!==h||!c((function(){k({})})),M=function(){if(e(this,h),i(this)===h)throw new b("Abstract class Iterator not directly constructable")},O=function(t,r){p?a(h,t,{configurable:!0,get:function(){return r},set:function(r){if(n(this),this===h)throw new b("You can't redefine this property");f(this,t)?this[t]=r:u(this,t,r)}}):h[t]=r};f(h,w)||O(w,y),!x&&f(h,m)&&h[m]!==Object||O(m,M),M.prototype=h,t({global:!0,constructor:!0,forced:x},{Iterator:M})}());var jn,_n,An={};_n||(_n=1,function(){if(jn)return An;jn=1;var t=Ce(),r=w(),e=Mt(),n=wr(),o=je(),i=pn(),s=dn(),a=Xt(),u=i((function(){for(var t,e,o=this.iterator,i=this.predicate,a=this.next;;){if(t=n(r(a,o)),this.done=!!t.done)return;if(e=t.value,s(o,i,[e,this.counter++],!0))return e}}));t({target:"Iterator",proto:!0,real:!0,forced:a},{filter:function(t){return n(this),e(t),new u(o(this),{predicate:t})}})}());class In{static isAdvancedMarkerAvailable(t){return google.maps.marker&&!0===t.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(t){return google.maps.marker&&t instanceof google.maps.marker.AdvancedMarkerElement}static setMap(t,r){this.isAdvancedMarker(t)?t.map=r:t.setMap(r)}static getPosition(t){if(this.isAdvancedMarker(t)){if(t.position){if(t.position instanceof google.maps.LatLng)return t.position;if(t.position.lat&&t.position.lng)return new google.maps.LatLng(t.position.lat,t.position.lng)}return new google.maps.LatLng(null)}return t.getPosition()}static getVisible(t){return!!this.isAdvancedMarker(t)||t.getVisible()}}class Tn{constructor(t){let{markers:r,position:e}=t;this.markers=[],r&&(this.markers=r),e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(0===this.markers.length&&!this._position)return;const t=new google.maps.LatLngBounds(this._position,this._position);for(const r of this.markers)t.extend(In.getPosition(r));return t}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((t=>In.getVisible(t))).length}push(t){this.markers.push(t)}delete(){this.marker&&(In.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}function Ln(t){if(null==t)throw Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assertion failed")}const Zn=(t,r,e,n)=>{const o=t.getBounds();Ln(o);const i=Rn(o,r,n);return e.filter((t=>i.contains(In.getPosition(t))))},Rn=(t,r,e)=>{const{northEast:n,southWest:o}=Fn(t,r),i=Nn({northEast:n,southWest:o},e);return Un(i,r)},zn=(t,r,e)=>{const n=Rn(t,r,e),o=n.getNorthEast(),i=n.getSouthWest();return[i.lng(),i.lat(),o.lng(),o.lat()]},Dn=(t,r)=>{const e=(r.lat-t.lat)*Math.PI/180,n=(r.lng-t.lng)*Math.PI/180,o=Math.sin(e/2),i=Math.sin(n/2),s=o*o+Math.cos(t.lat*Math.PI/180)*Math.cos(r.lat*Math.PI/180)*i*i;return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},Fn=(t,r)=>{const e=r.fromLatLngToDivPixel(t.getNorthEast()),n=r.fromLatLngToDivPixel(t.getSouthWest());return Ln(e),Ln(n),{northEast:e,southWest:n}},Nn=(t,r)=>{let{northEast:e,southWest:n}=t;return e.x+=r,e.y-=r,n.x-=r,n.y+=r,{northEast:e,southWest:n}},Un=(t,r)=>{let{northEast:e,southWest:n}=t;const o=r.fromDivPixelToLatLng(n),i=r.fromDivPixelToLatLng(e);return new google.maps.LatLngBounds(o,i)};class Bn{constructor(t){let{maxZoom:r=16}=t;this.maxZoom=r}noop(t){let{markers:r}=t;return Wn(r)}}class Vn extends Bn{constructor(t){var{viewportPadding:r=60}=t;super(gn(t,["viewportPadding"])),this.viewportPadding=60,this.viewportPadding=r}calculate(t){let{markers:r,map:e,mapCanvasProjection:n}=t;const o=e.getZoom();return Ln(o),o>=this.maxZoom?{clusters:this.noop({markers:r}),changed:!1}:{clusters:this.cluster({markers:Zn(e,n,r,this.viewportPadding),map:e,mapCanvasProjection:n})}}}const Wn=t=>t.map((t=>new Tn({position:In.getPosition(t),markers:[t]})));var Gn,$n,Hn,qn,Yn,Kn,Xn,Jn,Qn,to,ro,eo,no,oo,io,so,ao,uo,co,fo,lo,ho,po={};function mo(){if(qn)return Hn;qn=1;var t=function(){if($n)return Gn;$n=1;var t=ft(),r=ct();return Gn=function(e){if("Function"===t(e))return r(e)}}(),r=Mt(),e=y(),n=t(t.bind);return Hn=function(t,o){return r(t),void 0===o?t:e?n(t,o):function(){return t.apply(o,arguments)}},Hn}function go(){return Kn?Yn:(Kn=1,Yn={})}function vo(){if(Jn)return Xn;Jn=1;var t=or(),r=go(),e=t("iterator"),n=Array.prototype;return Xn=function(t){return void 0!==t&&(r.Array===t||n[e]===t)}}function yo(){if(eo)return ro;eo=1;var t=function(){if(to)return Qn;to=1;var t={};return t[or()("toStringTag")]="z",Qn="[object z]"===String(t)}(),r=dt(),e=ft(),n=or()("toStringTag"),o=Object,i="Arguments"===e(function(){return arguments}());return ro=t?e:function(t){var s,a,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=function(t,r){try{return t[r]}catch(t){}}(s=o(t),n))?a:i?e(s):"Object"===(u=e(s))&&r(s.callee)?"Arguments":u}}function wo(){if(oo)return no;oo=1;var t=yo(),r=Ot(),e=lt(),n=go(),o=or()("iterator");return no=function(i){if(!e(i))return r(i,o)||r(i,"@@iterator")||n[t(i)]}}function bo(){if(so)return io;so=1;var t=w(),r=Mt(),e=wr(),n=xt(),o=wo(),i=TypeError;return io=function(s,a){var u=arguments.length<2?o(s):a;if(r(u))return e(t(u,s));throw new i(n(s)+" is not iterable")},io}function ko(){if(uo)return ao;uo=1;var t=mo(),r=w(),e=wr(),n=xt(),o=vo(),i=le(),s=vt(),a=bo(),u=wo(),c=hn(),f=TypeError,l=function(t,r){this.stopped=t,this.result=r},h=l.prototype;return ao=function(p,d,m){var g,v,y,w,b,k,x,M=m&&m.that,O=!(!m||!m.AS_ENTRIES),E=!(!m||!m.IS_RECORD),P=!(!m||!m.IS_ITERATOR),S=!(!m||!m.INTERRUPTED),C=t(d,M),j=function(t){return g&&c(g,"normal",t),new l(!0,t)},_=function(t){return O?(e(t),S?C(t[0],t[1],j):C(t[0],t[1])):S?C(t,j):C(t)};if(E)g=p.iterator;else if(P)g=p;else{if(!(v=u(p)))throw new f(n(p)+" is not iterable");if(o(v)){for(y=0,w=i(p);w>y;y++)if((b=_(p[y]))&&s(h,b))return b;return new l(!1)}g=a(p,v)}for(k=E?p.next:g.next;!(x=r(k,g)).done;){try{b=_(x.value)}catch(t){c(g,"throw",t)}if("object"==typeof b&&b&&s(h,b))return b}return new l(!1)}}fo||(fo=1,function(){if(co)return po;co=1;var t=Ce(),r=ko(),e=Mt(),n=wr(),o=je();t({target:"Iterator",proto:!0,real:!0},{forEach:function(t){n(this),e(t);var i=o(this),s=0;r(i,(function(r){t(r,s++)}),{IS_RECORD:!0})}})}());var xo=(ho||(ho=1,lo=function t(r,e){if(r===e)return!0;if(r&&e&&"object"==typeof r&&"object"==typeof e){if(r.constructor!==e.constructor)return!1;var n,o,i;if(Array.isArray(r)){if((n=r.length)!=e.length)return!1;for(o=n;0!=o--;)if(!t(r[o],e[o]))return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if((n=(i=Object.keys(r)).length)!==Object.keys(e).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(e,i[o]))return!1;for(o=n;0!=o--;){var s=i[o];if(!t(r[s],e[s]))return!1}return!0}return r!=r&&e!=e}),lo),Mo=e(xo);const Oo=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Eo{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,e]=new Uint8Array(t,0,2);if(219!==r)throw new Error("Data does not appear to be in a KDBush format.");const n=e>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const o=Oo[15&e];if(!o)throw new Error("Unrecognized array type.");const[i]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new Eo(s,i,o,t)}constructor(t,r=64,e=Float64Array,n){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=e,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const o=Oo.indexOf(this.ArrayType),i=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${e}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+i+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const e=this._pos>>1;return this.ids[e]=e,this.coords[this._pos++]=t,this.coords[this._pos++]=r,e}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Po(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:i,nodeSize:s}=this,a=[0,o.length-1,0],u=[];for(;a.length;){const c=a.pop()||0,f=a.pop()||0,l=a.pop()||0;if(f-l<=s){for(let s=l;s<=f;s++){const a=i[2*s],c=i[2*s+1];a>=t&&a<=e&&c>=r&&c<=n&&u.push(o[s])}continue}const h=l+f>>1,p=i[2*h],d=i[2*h+1];p>=t&&p<=e&&d>=r&&d<=n&&u.push(o[h]),(0===c?t<=p:r<=d)&&(a.push(l),a.push(h-1),a.push(1-c)),(0===c?e>=p:n>=d)&&(a.push(h+1),a.push(f),a.push(1-c))}return u}within(t,r,e){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:i}=this,s=[0,n.length-1,0],a=[],u=e*e;for(;s.length;){const c=s.pop()||0,f=s.pop()||0,l=s.pop()||0;if(f-l<=i){for(let e=l;e<=f;e++)_o(o[2*e],o[2*e+1],t,r)<=u&&a.push(n[e]);continue}const h=l+f>>1,p=o[2*h],d=o[2*h+1];_o(p,d,t,r)<=u&&a.push(n[h]),(0===c?t-e<=p:r-e<=d)&&(s.push(l),s.push(h-1),s.push(1-c)),(0===c?t+e>=p:r+e>=d)&&(s.push(h+1),s.push(f),s.push(1-c))}return a}}function Po(t,r,e,n,o,i){if(o-n<=e)return;const s=n+o>>1;So(t,r,s,n,o,i),Po(t,r,e,n,s-1,1-i),Po(t,r,e,s+1,o,1-i)}function So(t,r,e,n,o,i){for(;o>n;){if(o-n>600){const s=o-n+1,a=e-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);So(t,r,e,Math.max(n,Math.floor(e-a*c/s+f)),Math.min(o,Math.floor(e+(s-a)*c/s+f)),i)}const s=r[2*e+i];let a=n,u=o;for(Co(t,r,n,e),r[2*o+i]>s&&Co(t,r,n,o);a<u;){for(Co(t,r,a,u),a++,u--;r[2*a+i]<s;)a++;for(;r[2*u+i]>s;)u--}r[2*n+i]===s?Co(t,r,n,u):(u++,Co(t,r,u,o)),u<=e&&(n=u+1),e<=u&&(o=u-1)}}function Co(t,r,e,n){jo(t,e,n),jo(r,2*e,2*n),jo(r,2*e+1,2*n+1)}function jo(t,r,e){const n=t[r];t[r]=t[e],t[e]=n}function _o(t,r,e,n){const o=t-e,i=r-n;return o*o+i*i}const Ao={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Io=Math.fround||(To=new Float32Array(1),t=>(To[0]=+t,To[0]));var To;const Lo=3,Zo=5,Ro=6;class zo{constructor(t){this.options=Object.assign(Object.create(Ao),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:r,minZoom:e,maxZoom:n}=this.options;r&&console.time("total time");const o=`prepare ${t.length} points`;r&&console.time(o),this.points=t;const i=[];for(let r=0;r<t.length;r++){const e=t[r];if(!e.geometry)continue;const[n,o]=e.geometry.coordinates,s=Io(No(n)),a=Io(Uo(o));i.push(s,a,1/0,r,-1,1),this.options.reduce&&i.push(0)}let s=this.trees[n+1]=this._createTree(i);r&&console.timeEnd(o);for(let t=n;t>=e;t--){const e=+Date.now();s=this.trees[t]=this._createTree(this._cluster(s,t)),r&&console.log("z%d: %d clusters in %dms",t,s.numItems,+Date.now()-e)}return r&&console.timeEnd("total time"),this}getClusters(t,r){let e=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let o=180===t[2]?180:((t[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)e=-180,o=180;else if(e>o){const t=this.getClusters([e,n,180,i],r),s=this.getClusters([-180,n,o,i],r);return t.concat(s)}const s=this.trees[this._limitZoom(r)],a=s.range(No(e),Uo(i),No(o),Uo(n)),u=s.data,c=[];for(const t of a){const r=this.stride*t;c.push(u[r+Zo]>1?Do(u,r,this.clusterProps):this.points[u[r+Lo]])}return c}getChildren(t){const r=this._getOriginId(t),e=this._getOriginZoom(t),n="No cluster with the specified id.",o=this.trees[e];if(!o)throw new Error(n);const i=o.data;if(r*this.stride>=i.length)throw new Error(n);const s=this.options.radius/(this.options.extent*Math.pow(2,e-1)),a=i[r*this.stride],u=i[r*this.stride+1],c=o.within(a,u,s),f=[];for(const r of c){const e=r*this.stride;i[e+4]===t&&f.push(i[e+Zo]>1?Do(i,e,this.clusterProps):this.points[i[e+Lo]])}if(0===f.length)throw new Error(n);return f}getLeaves(t,r,e){r=r||10,e=e||0;const n=[];return this._appendLeaves(n,t,r,e,0),n}getTile(t,r,e){const n=this.trees[this._limitZoom(t)],o=Math.pow(2,t),{extent:i,radius:s}=this.options,a=s/i,u=(e-a)/o,c=(e+1+a)/o,f={features:[]};return this._addTileFeatures(n.range((r-a)/o,u,(r+1+a)/o,c),n.data,r,e,o,f),0===r&&this._addTileFeatures(n.range(1-a/o,u,1,c),n.data,o,e,o,f),r===o-1&&this._addTileFeatures(n.range(0,u,a/o,c),n.data,-1,e,o,f),f.features.length?f:null}getClusterExpansionZoom(t){let r=this._getOriginZoom(t)-1;for(;r<=this.options.maxZoom;){const e=this.getChildren(t);if(r++,1!==e.length)break;t=e[0].properties.cluster_id}return r}_appendLeaves(t,r,e,n,o){const i=this.getChildren(r);for(const r of i){const i=r.properties;if(i&&i.cluster?o+i.point_count<=n?o+=i.point_count:o=this._appendLeaves(t,i.cluster_id,e,n,o):o<n?o++:t.push(r),t.length===e)break}return o}_createTree(t){const r=new Eo(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(t,r,e,n,o,i){for(const s of t){const t=s*this.stride,a=r[t+Zo]>1;let u,c,f;if(a)u=Fo(r,t,this.clusterProps),c=r[t],f=r[t+1];else{const e=this.points[r[t+Lo]];u=e.properties;const[n,o]=e.geometry.coordinates;c=No(n),f=Uo(o)}const l={type:1,geometry:[[Math.round(this.options.extent*(c*o-e)),Math.round(this.options.extent*(f*o-n))]],tags:u};let h;h=a||this.options.generateId?r[t+Lo]:this.points[r[t+Lo]].id,void 0!==h&&(l.id=h),i.features.push(l)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,r){const{radius:e,extent:n,reduce:o,minPoints:i}=this.options,s=e/(n*Math.pow(2,r)),a=t.data,u=[],c=this.stride;for(let e=0;e<a.length;e+=c){if(a[e+2]<=r)continue;a[e+2]=r;const n=a[e],f=a[e+1],l=t.within(a[e],a[e+1],s),h=a[e+Zo];let p=h;for(const t of l){const e=t*c;a[e+2]>r&&(p+=a[e+Zo])}if(p>h&&p>=i){let t,i=n*h,s=f*h,d=-1;const m=(e/c<<5)+(r+1)+this.points.length;for(const n of l){const u=n*c;if(a[u+2]<=r)continue;a[u+2]=r;const f=a[u+Zo];i+=a[u]*f,s+=a[u+1]*f,a[u+4]=m,o&&(t||(t=this._map(a,e,!0),d=this.clusterProps.length,this.clusterProps.push(t)),o(t,this._map(a,u)))}a[e+4]=m,u.push(i/p,s/p,1/0,m,-1,p),o&&u.push(d)}else{for(let t=0;t<c;t++)u.push(a[e+t]);if(p>1)for(const t of l){const e=t*c;if(!(a[e+2]<=r)){a[e+2]=r;for(let t=0;t<c;t++)u.push(a[e+t])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,r,e){if(t[r+Zo]>1){const n=this.clusterProps[t[r+Ro]];return e?Object.assign({},n):n}const n=this.points[t[r+Lo]].properties,o=this.options.map(n);return e&&o===n?Object.assign({},o):o}}function Do(t,r,e){return{type:"Feature",id:t[r+Lo],properties:Fo(t,r,e),geometry:{type:"Point",coordinates:[(n=t[r],360*(n-.5)),Bo(t[r+1])]}};var n}function Fo(t,r,e){const n=t[r+Zo],o=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?Math.round(n/100)/10+"k":n,i=t[r+Ro],s=-1===i?{}:Object.assign({},e[i]);return Object.assign(s,{cluster:!0,cluster_id:t[r+Lo],point_count:n,point_count_abbreviated:o})}function No(t){return t/360+.5}function Uo(t){const r=Math.sin(t*Math.PI/180),e=.5-.25*Math.log((1+r)/(1-r))/Math.PI;return e<0?0:e>1?1:e}function Bo(t){const r=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(r))/Math.PI-90}class Vo extends Bn{constructor(t){var{maxZoom:r,radius:e=60}=t,n=gn(t,["maxZoom","radius"]);super({maxZoom:r}),this.markers=[],this.clusters=[],this.state={zoom:-1},this.superCluster=new zo(Object.assign({maxZoom:this.maxZoom,radius:e},n))}calculate(t){let r=!1;const e=t.map.getZoom();Ln(e);const n={zoom:e};if(!Mo(t.markers,this.markers)){r=!0,this.markers=[...t.markers];const e=this.markers.map((t=>{const r=In.getPosition(t);return{type:"Feature",geometry:{type:"Point",coordinates:[r.lng(),r.lat()]},properties:{marker:t}}}));this.superCluster.load(e)}return r||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(r=!Mo(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:r}}cluster(t){let{map:r}=t;const e=r.getZoom();return Ln(e),this.superCluster.getClusters([-180,-90,180,90],Math.round(e)).map((t=>this.transformCluster(t)))}transformCluster(t){let{geometry:{coordinates:[r,e]},properties:n}=t;if(n.cluster)return new Tn({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map((t=>t.properties.marker)),position:{lat:e,lng:r}});const o=n.marker;return new Tn({markers:[o],position:In.getPosition(o)})}}var Wo,Go,$o,Ho={};Go||(Go=1,function(){if(Wo)return Ho;Wo=1;var t=Ce(),r=ko(),e=Mt(),n=wr(),o=je(),i=TypeError;t({target:"Iterator",proto:!0,real:!0},{reduce:function(t){n(this),e(t);var s=o(this),a=arguments.length<2,u=a?void 0:arguments[1],c=0;if(r(s,(function(r){a?(a=!1,u=r):u=t(u,r,c),c++}),{IS_RECORD:!0}),a)throw new i("Reduce of empty iterator with no initial value");return u}})}());class qo{constructor(t,r){this.markers={sum:t.length};const e=r.map((t=>t.count)),n=e.reduce(((t,r)=>t+r),0);this.clusters={count:r.length,markers:{mean:n/r.length,sum:n,min:Math.min(...e),max:Math.max(...e)}}}}class Yo{render(t,r,e){let{count:n,position:o}=t;const i=`<svg fill="${n>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${n}</text>\n</svg>`,s=`Cluster of ${n} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+n;if(In.isAdvancedMarkerAvailable(e)){const t=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement;t.setAttribute("transform","translate(0 25)");const r={map:e,position:o,zIndex:a,title:s,content:t};return new google.maps.marker.AdvancedMarkerElement(r)}const u={position:o,zIndex:a,title:s,icon:{url:`data:image/svg+xml;base64,${btoa(i)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class Ko{constructor(){!function(t,r){for(let e in r.prototype)t.prototype[e]=r.prototype[e]}(Ko,google.maps.OverlayView)}}t.MarkerClustererEvents=void 0,($o=t.MarkerClustererEvents||(t.MarkerClustererEvents={})).CLUSTERING_BEGIN="clusteringbegin",$o.CLUSTERING_END="clusteringend",$o.CLUSTER_CLICK="click";const Xo=(t,r,e)=>{r.bounds&&e.fitBounds(r.bounds)};t.AbstractAlgorithm=Bn,t.AbstractViewportAlgorithm=Vn,t.Cluster=Tn,t.ClusterStats=qo,t.DefaultRenderer=Yo,t.GridAlgorithm=class extends Vn{constructor(t){var{maxDistance:r=4e4,gridSize:e=40}=t;super(gn(t,["maxDistance","gridSize"])),this.clusters=[],this.state={zoom:-1},this.maxDistance=r,this.gridSize=e}calculate(t){let{markers:r,map:e,mapCanvasProjection:n}=t;const o=e.getZoom();Ln(o);const i={zoom:o};let s=!1;return this.state.zoom>=this.maxZoom&&i.zoom>=this.maxZoom||(s=!Mo(this.state,i)),this.state=i,o>=this.maxZoom?{clusters:this.noop({markers:r}),changed:s}:{clusters:this.cluster({markers:Zn(e,n,r,this.viewportPadding),map:e,mapCanvasProjection:n})}}cluster(t){let{markers:r,map:e,mapCanvasProjection:n}=t;return this.clusters=[],r.forEach((t=>{this.addToClosestCluster(t,e,n)})),this.clusters}addToClosestCluster(t,r,e){let n=this.maxDistance,o=null;for(let r=0;r<this.clusters.length;r++){const e=this.clusters[r];Ln(e.bounds);const i=Dn(e.bounds.getCenter().toJSON(),In.getPosition(t).toJSON());i<n&&(n=i,o=e)}if(o)if(Ln(o.bounds),Rn(o.bounds,e,this.gridSize).contains(In.getPosition(t)))o.push(t);else{const r=new Tn({markers:[t]});this.clusters.push(r)}else{const r=new Tn({markers:[t]});this.clusters.push(r)}}},t.MarkerClusterer=class extends Ko{constructor(t){let{map:r,markers:e=[],algorithmOptions:n={},algorithm:o=new Vo(n),renderer:i=new Yo,onClusterClick:s=Xo}=t;super(),this.map=null,this.idleListener=null,this.markers=[...e],this.clusters=[],this.algorithm=o,this.renderer=i,this.onClusterClick=s,r&&this.setMap(r)}addMarker(t,r){this.markers.includes(t)||(this.markers.push(t),r||this.render())}addMarkers(t,r){t.forEach((t=>{this.addMarker(t,!0)})),r||this.render()}removeMarker(t,r){const e=this.markers.indexOf(t);return-1!==e&&(In.setMap(t,null),this.markers.splice(e,1),r||this.render(),!0)}removeMarkers(t,r){let e=!1;return t.forEach((t=>{e=this.removeMarker(t,!0)||e})),e&&!r&&this.render(),e}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const r=this.getMap();if(r instanceof google.maps.Map&&r.getProjection()){google.maps.event.trigger(this,t.MarkerClustererEvents.CLUSTERING_BEGIN,this);const{clusters:e,changed:n}=this.algorithm.calculate({markers:this.markers,map:r,mapCanvasProjection:this.getProjection()});if(n||null==n){const t=new Set;for(const r of e)1==r.markers.length&&t.add(r.markers[0]);const r=[];for(const e of this.clusters)null!=e.marker&&(1==e.markers.length?t.has(e.marker)||In.setMap(e.marker,null):r.push(e.marker));this.clusters=e,this.renderClusters(),requestAnimationFrame((()=>r.forEach((t=>In.setMap(t,null)))))}google.maps.event.trigger(this,t.MarkerClustererEvents.CLUSTERING_END,this)}}onAdd(){const t=this.getMap();Ln(t),this.idleListener=t.addListener("idle",this.render.bind(this)),this.render()}onRemove(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((t=>In.setMap(t,null))),this.clusters.forEach((t=>t.delete())),this.clusters=[]}renderClusters(){const r=new qo(this.markers,this.clusters),e=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,r,e),n.markers.forEach((t=>In.setMap(t,null))),this.onClusterClick&&n.marker.addListener("click",(r=>{google.maps.event.trigger(this,t.MarkerClustererEvents.CLUSTER_CLICK,n),this.onClusterClick(r,n,e)}))),In.setMap(n.marker,e)}))}},t.MarkerUtils=In,t.NoopAlgorithm=class extends Bn{constructor(t){super(gn(t,[]))}calculate(t){let{markers:r,map:e,mapCanvasProjection:n}=t;return{clusters:this.cluster({markers:r,map:e,mapCanvasProjection:n}),changed:!1}}cluster(t){return this.noop(t)}},t.SuperClusterAlgorithm=Vo,t.SuperClusterViewportAlgorithm=class extends Vn{constructor(t){var{maxZoom:r,radius:e=60,viewportPadding:n=60}=t,o=gn(t,["maxZoom","radius","viewportPadding"]);super({maxZoom:r,viewportPadding:n}),this.markers=[],this.clusters=[],this.superCluster=new zo(Object.assign({maxZoom:this.maxZoom,radius:e},o)),this.state={zoom:-1,view:[0,0,0,0]}}calculate(t){const r=this.getViewportState(t);let e=!Mo(this.state,r);if(!Mo(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const r=this.markers.map((t=>{const r=In.getPosition(t);return{type:"Feature",geometry:{type:"Point",coordinates:[r.lng(),r.lat()]},properties:{marker:t}}}));this.superCluster.load(r)}return e&&(this.clusters=this.cluster(t),this.state=r),{clusters:this.clusters,changed:e}}cluster(t){const r=this.getViewportState(t);return this.superCluster.getClusters(r.view,r.zoom).map((t=>this.transformCluster(t)))}transformCluster(t){let{geometry:{coordinates:[r,e]},properties:n}=t;if(n.cluster)return new Tn({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map((t=>t.properties.marker)),position:{lat:e,lng:r}});const o=n.marker;return new Tn({markers:[o],position:In.getPosition(o)})}getViewportState(t){const r=t.map.getZoom(),e=t.map.getBounds();return Ln(r),Ln(e),{zoom:Math.round(r),view:zn(e,t.mapCanvasProjection,this.viewportPadding)}}},t.defaultOnClusterClickHandler=Xo,t.distanceBetweenPoints=Dn,t.extendBoundsToPaddedViewport=Rn,t.extendPixelBounds=Nn,t.filterMarkersToPaddedViewport=Zn,t.getPaddedViewport=zn,t.noop=Wn,t.pixelBoundsToLatLngBounds=Un}));
//# sourceMappingURL=index.umd.js.map
